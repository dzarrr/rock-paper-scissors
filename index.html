<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissors!</title>
    <meta charset="UTF-8"/>
  </head>
  <body>
    <div class="container">
      <div class="selection">
        <div>
          <button id="selection__rock" value="rock">Rock</button>
        </div>
        <div>
          <button id="selection__paper" value="paper">Paper</button>
        </div>
        <div>
          <button id="selection__scissors" value="scissors">Scissors</button>
        </div>
      </div>
      <div class="result">
      </div>
      <div class="score">
        <div id="score__player">0</div>
        <div id="score__computer">0</div>
      </div>
    </div>
    <script>
      let possibleChoice = [
        'rock',
        'paper',
        'scissors'
      ]

      let score = {
        player: 0,
        computer: 0
      }

      let buttons = document.querySelectorAll('button');
      buttons.forEach(function(button) {
        button.addEventListener('click', buttonClickHandler);
      });

      function buttonClickHandler(e) {  
        let computerSelection = possibleChoice[parseInt(Math.floor(Math.random() * possibleChoice.length))]
        let playerSelection = e.target.value;
        let result = document.querySelector('.result');
        result.innerHTML = playRound(playerSelection, computerSelection);
      }

      function updateScore(name){
        score[name] += 1;
        let winnerScore = document.querySelector(`#score__${name}`);
        winnerScore.innerText = score[name];
        if (score[name] == 5 ) announceWinner(name);
      }

      function announceWinner(name) {
        disableAllButton();
        alert(`Congrats, ${name}. You've won the game!`);
      }

      function disableAllButton() {
        let buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
          button.disabled = true;
        })
      }

      function playRound(playerSelection, computerSelection) {
        if (playerSelection.toLowerCase() == computerSelection.toLowerCase()) {
          return `Draw, you both select ${playerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'rock') && (computerSelection.toLowerCase() == 'paper')) {
          updateScore('computer');
          return `You lose this round! ${computerSelection.toLowerCase()} beats ${playerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'rock') && (computerSelection.toLowerCase() == 'scissors')) {
          updateScore('player');
          return `You win this round! ${playerSelection.toLowerCase()} beats ${computerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'paper') && (computerSelection.toLowerCase() == 'scissors')) {
          updateScore('computer');
          return `You lose this round! ${computerSelection.toLowerCase()} beats ${playerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'paper') && (computerSelection.toLowerCase() == 'rock')) {
          updateScore('player');
          return `You win this round! ${playerSelection.toLowerCase()} beats ${computerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'scissors') && (computerSelection.toLowerCase() == 'rock')) {
          updateScore('computer');
          return `You lose this round! ${computerSelection.toLowerCase()} beats ${playerSelection.toLowerCase()}`;
        } else if ((playerSelection.toLowerCase() == 'scissors') && (computerSelection.toLowerCase() == 'paper')) {
          updateScore('player');
          return `You win this round! ${playerSelection.toLowerCase()} beats ${computerSelection.toLowerCase()}`;
        }
      }

    </script>
  </body>
</html>